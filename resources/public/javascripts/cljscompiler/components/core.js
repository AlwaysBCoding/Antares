// Compiled by ClojureScript 0.0-2277
goog.provide('components.core');
goog.require('cljs.core');
goog.require('hiccups.runtime');
goog.require('hiccups.runtime');
goog.require('cljs_http.client');
goog.require('cljs_http.client');
goog.require('antares.core');
goog.require('antares.core');
components.core.create_week1_output_structure = (function create_week1_output_structure(input_data){var matrix = antares.core.string__GT_matrix.call(null,input_data);var headers = cljs.core.map.call(null,((function (matrix){
return (function (p1__142419_SHARP_){return cljs.core.keyword.call(null,p1__142419_SHARP_);
});})(matrix))
,cljs.core.first.call(null,matrix));var rows = cljs.core.rest.call(null,matrix);var input_data_map = cljs.core.map.call(null,((function (matrix,headers,rows){
return (function (row){return cljs.core.zipmap.call(null,headers,row);
});})(matrix,headers,rows))
,rows);return new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"restaurant","restaurant",-1643127983),new cljs.core.Keyword(null,"restaurant","restaurant",-1643127983).cljs$core$IFn$_invoke$arity$1(cljs.core.first.call(null,input_data_map)),new cljs.core.Keyword(null,"vendor","vendor",1931975424),new cljs.core.Keyword(null,"vendor_invoiceanalyzer","vendor_invoiceanalyzer",522045614).cljs$core$IFn$_invoke$arity$1(cljs.core.first.call(null,input_data_map)),new cljs.core.Keyword(null,"invoice-number","invoice-number",-1359609604),new cljs.core.Keyword(null,"invoicenumber_invoiceanalyzer","invoicenumber_invoiceanalyzer",-342607661).cljs$core$IFn$_invoke$arity$1(cljs.core.first.call(null,input_data_map)),new cljs.core.Keyword(null,"invoice-amount","invoice-amount",366970402),new cljs.core.Keyword(null,"invoiceamount_invoiceanalyzer","invoiceamount_invoiceanalyzer",-1390845101).cljs$core$IFn$_invoke$arity$1(cljs.core.first.call(null,input_data_map)),new cljs.core.Keyword(null,"items","items",1031954938),cljs.core.map.call(null,((function (matrix,headers,rows,input_data_map){
return (function (item_row){return new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"item-name","item-name",1560972259),new cljs.core.Keyword(null,"description_invoiceanalyzer","description_invoiceanalyzer",1319963185).cljs$core$IFn$_invoke$arity$1(item_row),new cljs.core.Keyword(null,"overpayment","overpayment",-530558288),new cljs.core.Keyword(null,"variance_invoiceanalyzer","variance_invoiceanalyzer",-1497581216).cljs$core$IFn$_invoke$arity$1(item_row)], null);
});})(matrix,headers,rows,input_data_map))
,cljs.core.filter.call(null,((function (matrix,headers,rows,input_data_map){
return (function (row){return cljs.core.not_EQ_.call(null,"",new cljs.core.Keyword(null,"variance_invoiceanalyzer","variance_invoiceanalyzer",-1497581216).cljs$core$IFn$_invoke$arity$1(row));
});})(matrix,headers,rows,input_data_map))
,input_data_map))], null);
});
components.core.create_week2_output_structure = (function create_week2_output_structure(input_data){return new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"return-value","return-value",661899451),(function (input_data__$1){return (((1) + (2)) + (3));
})], null);
});
components.core.create_week3_output_structure = (function create_week3_output_structure(input_data){return new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"return-value","return-value",661899451),(function (input_data__$1){return (((4) + (5)) + (6));
})], null);
});
components.core.activate_file = (function activate_file(event){antares.core.update_cursor.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"active-file","active-file",1544777749)], null),(function (old_value){return event.target.dataset.fileName;
}));
return antares.core.update_cursor_async.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"active-file-data","active-file-data",-495140405)], null),("http://antares-services.herokuapp.com/services/s3/vendoriq-data-imports/get-object/"+cljs.core.str.cljs$core$IFn$_invoke$arity$1(event.target.dataset.fileName)));
});
components.core.render_files_list = (function render_files_list(data){return (''+cljs.core.str.cljs$core$IFn$_invoke$arity$1(hiccups.runtime.render_html.call(null,cljs.core.map.call(null,(function (file_name){return new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"a","a",-2123407586),((cljs.core._EQ_.call(null,cljs.core.get_in.call(null,cljs.core.deref.call(null,antares.core.app_state),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"active-file","active-file",1544777749)], null)),file_name))?new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"data-file-name","data-file-name",1306288466),file_name,new cljs.core.Keyword(null,"class","class",-2030961996),"item file-name active"], null):new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"data-file-name","data-file-name",1306288466),file_name,new cljs.core.Keyword(null,"class","class",-2030961996),"item file-name inactive"], null)),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"i.right.triangle.icon","i.right.triangle.icon",1017223808)], null),file_name], null);
}),data))));
});
components.core.files_list = new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"app-cursor","app-cursor",1859881648),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"files-list","files-list",-1021882299)], null),new cljs.core.Keyword(null,"dom-cursor","dom-cursor",-1375555677),".files-list",new cljs.core.Keyword(null,"interactions","interactions",550841811),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"event-type","event-type",319722813),"click",new cljs.core.Keyword(null,"event-selector","event-selector",1193857930),"a.file-name",new cljs.core.Keyword(null,"event-action","event-action",-974748529),components.core.activate_file], null)], null),new cljs.core.Keyword(null,"render-fn","render-fn",398796518),components.core.render_files_list,new cljs.core.Keyword(null,"data","data",-232669377),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"source","source",-433931539),"s3Bucket",new cljs.core.Keyword(null,"bucket-name","bucket-name",-971156135),"vendoriq-data-imports"], null)], null);
components.core.activate_template = (function activate_template(event){antares.core.update_cursor.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"active-template","active-template",-1511987141)], null),(function (old_value){return event.target.dataset.templateName;
}));
return antares.core.update_cursor.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"active-template-mapping-fn","active-template-mapping-fn",-845451815)], null),(function (old_value){return event.target.dataset.mappingFn;
}));
});
components.core.render_templates_list = (function render_templates_list(data){return (''+cljs.core.str.cljs$core$IFn$_invoke$arity$1(hiccups.runtime.render_html.call(null,cljs.core.map.call(null,(function (template_info){return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),((cljs.core._EQ_.call(null,cljs.core.get_in.call(null,cljs.core.deref.call(null,antares.core.app_state),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"active-template","active-template",-1511987141)], null)),new cljs.core.Keyword(null,"name","name",1843675177).cljs$core$IFn$_invoke$arity$1(template_info)))?new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"data-template-name","data-template-name",1267270877),new cljs.core.Keyword(null,"name","name",1843675177).cljs$core$IFn$_invoke$arity$1(template_info),new cljs.core.Keyword(null,"data-mapping-fn","data-mapping-fn",376053571),new cljs.core.Keyword(null,"mapping-fn","mapping-fn",1124246410).cljs$core$IFn$_invoke$arity$1(template_info),new cljs.core.Keyword(null,"class","class",-2030961996),"item template-name active"], null):new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"data-template-name","data-template-name",1267270877),new cljs.core.Keyword(null,"name","name",1843675177).cljs$core$IFn$_invoke$arity$1(template_info),new cljs.core.Keyword(null,"data-mapping-fn","data-mapping-fn",376053571),new cljs.core.Keyword(null,"mapping-fn","mapping-fn",1124246410).cljs$core$IFn$_invoke$arity$1(template_info),new cljs.core.Keyword(null,"class","class",-2030961996),"item template-name inactive"], null)),new cljs.core.Keyword(null,"name","name",1843675177).cljs$core$IFn$_invoke$arity$1(template_info)], null);
}),data))));
});
components.core.templates_list = new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"app-cursor","app-cursor",1859881648),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"templates-list","templates-list",-383921971)], null),new cljs.core.Keyword(null,"dom-cursor","dom-cursor",-1375555677),".templates-list",new cljs.core.Keyword(null,"interactions","interactions",550841811),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"event-type","event-type",319722813),"click",new cljs.core.Keyword(null,"event-selector","event-selector",1193857930),"div.template-name",new cljs.core.Keyword(null,"event-action","event-action",-974748529),components.core.activate_template], null)], null),new cljs.core.Keyword(null,"render-fn","render-fn",398796518),components.core.render_templates_list,new cljs.core.Keyword(null,"data","data",-232669377),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"source","source",-433931539),"static",new cljs.core.Keyword(null,"initialize","initialize",609952913),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"name","name",1843675177),"template1",new cljs.core.Keyword(null,"mapping-fn","mapping-fn",1124246410),(''+cljs.core.str.cljs$core$IFn$_invoke$arity$1(components.core.create_week1_output_structure))], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"name","name",1843675177),"template2",new cljs.core.Keyword(null,"mapping-fn","mapping-fn",1124246410),"(fn [input-data] (+ 1 2 3))"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"name","name",1843675177),"template3",new cljs.core.Keyword(null,"mapping-fn","mapping-fn",1124246410),"(fn [input-data] (+ 7 8 9))"], null)], null)], null)], null);
components.core.render_active_file_content = (function render_active_file_content(data){return (''+cljs.core.str.cljs$core$IFn$_invoke$arity$1(hiccups.runtime.render_html.call(null,(function (){var filecontent = new cljs.core.Keyword(null,"filecontent","filecontent",-1743873514).cljs$core$IFn$_invoke$arity$1(data);var matrix = antares.core.string__GT_matrix.call(null,filecontent);var headers = cljs.core.first.call(null,matrix);var rows = cljs.core.rest.call(null,matrix);return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"table.ui.table.segment.celled","table.ui.table.segment.celled",151909143),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"thead","thead",-291875296),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"tr","tr",-1424774646),cljs.core.map_indexed.call(null,((function (filecontent,matrix,headers,rows){
return (function (index,header){return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"th","th",-545608566),header], null);
});})(filecontent,matrix,headers,rows))
,headers)], null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"tbody.editable-rows","tbody.editable-rows",-1073020666),cljs.core.map_indexed.call(null,((function (filecontent,matrix,headers,rows){
return (function (row_index,row){return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"tr","tr",-1424774646),cljs.core.map_indexed.call(null,((function (filecontent,matrix,headers,rows){
return (function (column_index,row_item){return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"td.editable-cell","td.editable-cell",1206826012),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"data-rowindex","data-rowindex",-1271042763),row_index,new cljs.core.Keyword(null,"data-columnindex","data-columnindex",1286245376),column_index], null),row_item], null);
});})(filecontent,matrix,headers,rows))
,row)], null);
});})(filecontent,matrix,headers,rows))
,rows)], null)], null);
})())));
});
components.core.active_file = new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"app-cursor","app-cursor",1859881648),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"active-file-data","active-file-data",-495140405)], null),new cljs.core.Keyword(null,"dom-cursor","dom-cursor",-1375555677),".active-file-content",new cljs.core.Keyword(null,"render-fn","render-fn",398796518),components.core.render_active_file_content], null);
components.core.render_week1_template = (function render_week1_template(data){return (''+cljs.core.str.cljs$core$IFn$_invoke$arity$1(((cljs.core._EQ_.call(null,new cljs.core.Keyword(null,"active-template","active-template",-1511987141).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,antares.core.app_state)),"template1"))?(''+cljs.core.str.cljs$core$IFn$_invoke$arity$1(hiccups.runtime.render_html.call(null,(function (){var analyzed_data = components.core.create_week1_output_structure.call(null,new cljs.core.Keyword(null,"filecontent","filecontent",-1743873514).cljs$core$IFn$_invoke$arity$1(data));return new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.template.week1","div.template.week1",410786116),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.header","div.header",1964513620),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"img","img",1442687358),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"src","src",-1651076051),"images/viq-header.png"], null)], null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.subheader","div.subheader",693238407),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p.invoice-number","p.invoice-number",-1233905536),("Invoice #: "+cljs.core.str.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"invoice-number","invoice-number",-1359609604).cljs$core$IFn$_invoke$arity$1(analyzed_data)))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p.invoice-amount","p.invoice-amount",143270754),("$"+cljs.core.str.cljs$core$IFn$_invoke$arity$1(Math.round.call(null,new cljs.core.Keyword(null,"invoice-amount","invoice-amount",366970402).cljs$core$IFn$_invoke$arity$1(analyzed_data))))], null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.items","div.items",-114898192),cljs.core.mapcat.call(null,((function (analyzed_data){
return (function (item){return new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p.item-name","p.item-name",1411298139),new cljs.core.Keyword(null,"item-name","item-name",1560972259).cljs$core$IFn$_invoke$arity$1(item)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p.overpayment","p.overpayment",-420319192),(''+cljs.core.str.cljs$core$IFn$_invoke$arity$1(Math.round.call(null,(new cljs.core.Keyword(null,"overpayment","overpayment",-530558288).cljs$core$IFn$_invoke$arity$1(item) * (100))))+"% Overpayment")], null),new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.overpayment-slider","div.overpayment-slider",1232369535),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.slider-segment.segment1","div.slider-segment.segment1",-324630914),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p.segment-text","p.segment-text",1491528761),"GREAT VALUE"], null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.slider-segment.segment2","div.slider-segment.segment2",701144250),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p.segment-text","p.segment-text",1491528761),"TARGET VALUE"], null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.slider-segment.segment3","div.slider-segment.segment3",-1435389386),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p.segment-text","p.segment-text",1491528761),"OVERPAYING"], null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.slider-marker","div.slider-marker",1618750244),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",-496642736),("left: "+cljs.core.str.cljs$core$IFn$_invoke$arity$1((function (){var x__3857__auto__ = (Math.round.call(null,(new cljs.core.Keyword(null,"overpayment","overpayment",-530558288).cljs$core$IFn$_invoke$arity$1(item) * (100))) + (60));var y__3858__auto__ = (90);return ((x__3857__auto__ < y__3858__auto__) ? x__3857__auto__ : y__3858__auto__);
})())+"%")], null)], null)], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"hr","hr",1377740067)], null)], null);
});})(analyzed_data))
,new cljs.core.Keyword(null,"items","items",1031954938).cljs$core$IFn$_invoke$arity$1(analyzed_data))], null)], null);
})()))):null)));
});
components.core.week1_template = new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"app-cursor","app-cursor",1859881648),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"active-file-data","active-file-data",-495140405)], null),new cljs.core.Keyword(null,"dom-cursor","dom-cursor",-1375555677),".active-template-content",new cljs.core.Keyword(null,"render-fn","render-fn",398796518),components.core.render_week1_template], null);
components.core.render_active_template_mapping_fn = (function render_active_template_mapping_fn(data){return (''+cljs.core.str.cljs$core$IFn$_invoke$arity$1((cljs.core.truth_(cljs.core.not_empty.call(null,data))?(''+cljs.core.str.cljs$core$IFn$_invoke$arity$1((function (){var attrs142423 = data;if(cljs.core.map_QMARK_.call(null,attrs142423))
{return ("<textarea"+cljs.core.str.cljs$core$IFn$_invoke$arity$1(hiccups.runtime.render_attr_map.call(null,cljs.core.merge.call(null,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"id","id",-1388402092),null,new cljs.core.Keyword(null,"class","class",-2030961996),null], null),attrs142423)))+"></textarea>");
} else
{return ("<textarea>"+cljs.core.str.cljs$core$IFn$_invoke$arity$1(hiccups.runtime.render_html.call(null,attrs142423))+"</textarea>");
}
})())):("<textarea></textarea>"))));
});
components.core.active_template_mapping_fn = new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"app-cursor","app-cursor",1859881648),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"active-template-mapping-fn","active-template-mapping-fn",-845451815)], null),new cljs.core.Keyword(null,"dom-cursor","dom-cursor",-1375555677),".active-template-mapping-fn",new cljs.core.Keyword(null,"render-fn","render-fn",398796518),components.core.render_active_template_mapping_fn,new cljs.core.Keyword(null,"post-render-fn","post-render-fn",-99818496),(function (){return CodeMirror.fromTextArea(document.querySelector(".active-template-mapping-fn textarea"));
})], null);

//# sourceMappingURL=core.js.map